---
layout: post
title: "AOJ 2632 Dense Amidakuji"
date: 2015-04-29T19:15:00+09:00
comments: true
category: AOJ
tags: [implementation]
---

[Dense Amidakuji](http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2632)

#### 問題概要

****

w(<=200000)本の縦棒からなるあみだくじがある．  
縦棒の高さはh(<=200000)で，横線を高さが整数の部分の隣接する縦棒間における．  
今，a≡b(mod 2)となるすべての位置(a,b)から右に横棒を置く．  
ここからn(<=200000)本の横棒を指定されたように除去するとき，あみだくじの結果はどうなるか．

#### 解法

****

除去前のあみだくじは規則正しく，高さが2wの周期で同じになっている．  
横棒を取り除くという操作は，その両端にくる値の結果の位置を入れ替えることに相当する．  
つまりどこからその値がきているかを調べ，その値を入れ替えて横棒自体にはなにもしなくてよい．  
ただし，あみだくじの性質上値は上から下へ結果が伝播するので取り除く操作は上から順にやる．  
あとはどこから来たかだが，このあみだくじは端から端まで階段を降りるような形なのでその逆をやればよい．  
ただし端から端へは1段ずつではなく一気にいくことと，高さが2wの周期で同じなのでその分だけ調べること．  

#### コード

****

{{< includeCode "/AOJ/2632.cpp" "cpp" >}}
