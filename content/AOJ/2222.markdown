---
layout: post
title: "AOJ 2222 Alien's Counting"
date: 2014-06-05T19:17:00+09:00
comments: true
category: AOJ
tags: [dp, strongly-connected-component]
---

[Alien's Counting](http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2222)

#### 問題概要

****

N本の指をもつエイリアンがいる. このエイリアンはある指を折るとどうしても一緒に折れてしまう指がM本ある.  
このときエイリアンの指の折り方は何通りあるでしょうか.

#### 解法

****

入力からグラフを作って, 閉路になっている部分は強連結成分分解してまとめる.  
連結でないグラフ同士は独立して考えることができるので, それぞれの場合の数を求めて掛けあわせれば良い.  
  
問題の制約から各ノードは最大でも1本しか辺が出て行かない.  
よって連結なグラフの中で辺が出て行かないノードはただ1つだけ存在する(枝分かれせず収束するしかないため).  
このことからグラフのトポロジカル順にDPすればよい.  
グラフのトポロジカル順は強連結成分分解の過程で簡単に求めることができる.  
またそのノードの指を折らない場合というのはその祖先も全て折らない場合なので常に1通りになる. よってその場合はいちいち数える必要はない.  
  
dp[i] := ノードiを折る場合の数  
遷移は各ノードを見ているとき, そのノードが影響するノードに場合の数+1(折らない場合)を掛けあわせれば良い.  
あとは連結でないグラフ同士の場合の数を掛け合わせるだけ.

#### コード

****

{{< includeCode "/AOJ/2222.cpp" "cpp" >}}
