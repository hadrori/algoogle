---
layout: post
title: "AOJ 2570 Shipura"
date: 2014-05-10T01:28:00+09:00
comments: true
category: AOJ
tags: [parsing]
---

[Shipura](http://judge.u-aizu.ac.jp/onlinejudge/description.jsp?id=2570)

#### 問題概要

****

#### 解法

****

数字か'S'の前の'>'は必ずシフト演算なので, それらをまず検出して別の記号に替えておく. 今回は$
頭から構文解析していくのは演算の順番的にもなんかつらいので, 後ろから再帰的にやるのが楽でよい.  
右から順に見ていくようにcurを定める.  
exprは後ろから見たら必ずtermが最初に現れるのでそのままとりあえずtermを呼ぶ.  
戻ってきたら, もし'<'だったらそのまま返す(termに呼ばれたexprなので). そうじゃなければ'$'のはずなのでcurを一個進めてさらにexprを呼んだ結果を前のtermの結果分シフトして返す.  
termは後ろから見たら数字か'>'なので'>'だったらcurを1個進めてexprを呼ぶ. 戻ってきたら"S<"の文だけcurを進める. 数字だったらnumberを呼ぶ.  
numberは数値を返すだけ.  
  
シフトする時にいっぱいシフトしちゃうと変な数が出てきちゃうので, ある程度で0になることを利用して, 最大でも31ぐらいまでしかシフトしないようにする.  

#### コード

****

{{< includeCode "/AOJ/2570.cpp" "cpp" >}}

