---
layout: post
title: "JOI 春合宿 2010 Hide-and-seek"
date: 2014-09-18T22:00:00+09:00
comments: true
category: JOI
tags: [segment-tree]
---

[Hide-and-seek](http://joisc2010.contest.atcoder.jp/tasks/joisc2010_hideseek)

#### 問題概要

****

2次元に広がるマスに障害物が置かれている.  
いまy=0のいずれかのマスからy>0の方向に攻撃が一直線に来る.  
各攻撃は障害物をどれだけ破壊できるか決まっている.  
障害物は中に入ることができるのでその数+1個目の障害物に隠れれば敵の攻撃を防げる.  
敵の攻撃を防げるようなマスのうちy座標が最小のものを求めよ.  
複数ある場合はx座標がそのなかで小さい方を求めよ.


#### 解法

****

マスは大きいので愚直に計算することはできない.  
y座標に対してx座標と障害物の数が小さいことに注目する.  
障害物をy座標の昇順に設置していくことを考える.  
障害物を設置するとき, そのx座標の区間にその直前までの障害物の重なりの最大が現れるなら, その重なり分と等しい攻撃力の攻撃から隠れるには現在の障害物を選ぶべき(これでy座標が決まる).  
区間の最大はSegment-Treeで管理すれば良い.  
そのとき, その値をとる一番小さいxも返すようにしてやれば答えが求まる.  
  
Segment-Treeはその区間に一度に足された数とその区間での最大値とそのx座標を持つようなものを考えれば良い.  


#### コード

****

{{< includeCode "/JOI/2010/hideandseek.cpp" "cpp" >}}
