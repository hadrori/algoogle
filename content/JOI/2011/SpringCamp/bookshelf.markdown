---
layout: post
title: "JOI 春合宿 2011 Bookshelf"
date: 2014-09-30T01:23:00+09:00
comments: true
category: JOI
tags: [dp, segment-tree]
---

[Bookshelf](http://joisc2011.contest.atcoder.jp/tasks/joisc2011_bookshelf)

#### 問題概要

****

1からNまでの番号が振られた本がN冊適当にならんでいる.  
今これを以下の操作で番号の昇順に直したい.  
本を一冊選んで取り出す.  
取り出された本を任意の位置に戻す.  
この時コストがそれぞれA\[i\] (iは本の番号)かかるとき, 最小のコストを求めよ

#### 解法

****

動かさない本のコストを最大化する.  
始めの本の列を左から見ていく.  
今見ている本の番号をiとし, iを動かさない時を考える.  
iまでで動かさないコストの総和の最大は, iの始めの位置より左にあるもののうち, 番号がiより小さい一番右の本までで動かさないコストの総和の最大にiのコストを足したものになる.  
これは始めの列の順でも昇順になっていたもの同士のため.  
始めの列で位置関係が違う本同士では必ずどちらかが動く.  
  
あとは一番右に来るのはiより前までのうちコストの総和の最大にもなるのでそれにiのコストを足せばiまでで動かさないコストの総和の最大が求まる.  


#### コード

****

{{< includeCode "/JOI/2011/bookshelf.cpp" "cpp" >}}
