---
layout: post
title: "JOI 春合宿 2011 Orienteering"
date: 2014-10-03T01:03:00+09:00
comments: true
category: JOI
tags: [dp, topological-sort]
---

[Orienteering](http://joisc2011.contest.atcoder.jp/tasks/joisc2011_orienteering)

#### 問題概要

****

始点1, 終点nで頂点1からどの頂点にも到達可能なDAGが与えられる.  
K個の頂点をチェックポイントとして指定する.  
2人であわせて全てのチェックポイントを通って始点から終点に向かうようなパスの最短距離を求めよ

#### 解法

****

まずどの頂点がどの頂点より前に来るか知りたいのでトポロジカルソートする.  
続いてチェックポイント以外で止まることに意味はないので, チェックポイントだけのグラフを考えて全点対最短路を求める.  
あとはどのように頂点を進んでいくか.  
  
片方がどちらかより先行していて, かつその頂点までのトポロジカル順で前にあるチェックポイントは全て通っているとする.  
このときの頂点をそれぞれ順にv, uと置く. またその状態までの最短距離をdp\[v\]\[u\]と置く.  
そうすると次に向かう頂点wはvのトポロジカル順で次のチェックポイントになる.  
wにはどちらが進んでも問題ないが先行する方を次のvにするということに注意する.  
  
これに加えてどちらも先行しない, つまりどちらも同じ場所にいる場合も考える.  
これは先行する場合の遷移先と, 先行する場合の遷移元に同じ頂点にいる場合を付け加えるだけで良い.


#### コード

****

{{< includeCode "/JOI/2011/orienteering.cpp" "cpp" >}}
