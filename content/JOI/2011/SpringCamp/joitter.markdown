---
layout: post
title: "JOI 春合宿 2011 Joitter"
date: 2014-09-21T23:25:00+09:00
comments: true
category: JOI
tags: [spanning-tree]
---

[Joitter](http://joisc2011.contest.atcoder.jp/tasks/joisc2011_joitter)

#### 問題概要

****

SNSサービスJoitterでは投稿の公開範囲を友達のみ, 友達とその友達のみ, 全体の3つから選べる.  
また友達になるにはその組ごとに決まったコストがかかる.  
N人の公開範囲と互いの友達登録コストが与えられたとき, 最小で何回友達になれば全員が互いに投稿を見ることができるようになるか.  
またそのときの最小のコストを求めよ.

#### 解法

****

問題自体は難しくないが, どのようなときに最適になるのか漏れ無くきちんと考察する必要がある.  
  
友達関係のグラフを考える.  
まず公開範囲が距離1の人だけの人がいる場合, その人と他全員が友達にならなければならない.  
またこのとき互いは距離2以下に収まる連結なグラフになるので他の公開範囲については考えなくて良い.  
  
公開範囲が距離2以下の人だけの人がいる場合, ある人を仲介にしてそこから他の人に辺を伸ばして木を作るのがほとんどの場合で最適.  
ただし公開範囲が距離2以下の人だけの人がちょうど2人のとき(他の人は全体に公開), この2人を中心として他の人をどちらかコストの小さい方に繋ぐのが最適になる.  
当然これらは連結なので全体に公開する人のことは考えなくて良い.  
  
最後に公開範囲が全体の人だけの場合, 最小全域木を作るのが最適. これはprim法でやるのが楽で良い.

#### コード

****

{{< includeCode "/JOI/2011/joitter.cpp" "cpp" >}}
