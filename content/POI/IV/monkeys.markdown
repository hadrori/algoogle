---
layout: post
title: "POI X Monkeys"
date: 2014-11-04T16:50:00+09:00
comments: true
category: POI
tags: [union-find, data-structure]
---

[Monkeys](http://main.edu.pl/en/archive/oi/10/mal)

#### 問題概要

****

n匹の猿がいて, 猿0は木にぶら下がっている.  
各猿は片手につき1匹まで他の猿のしっぽをつかむことができる.  
互いにつかみ合うことも可能.  
今, 時刻mまで各時刻のある1匹の猿のどちらかの手を離す情報が記録してある.  
当然手を離したら落ちてしまう猿がでてくる.  
各猿の落下する時刻を求めよ.  
落下しない場合は-1  
また, 猿ははじめ全員落下しないでぶら下がれている.

#### 解法

****

逆順に処理していけば良い.  
始めに時刻mからはじめる.  
このとき連結している猿同士を1つのグループとしてまとめて考える.  
これはUnion-Find木で管理すれば良い.  
また各グループにどの猿が属しているかの情報も持っておきたいので, 各グループの根の猿の番号をグループ番号として別個に猿の集合を持っておく.  
グループをマージするとき, どちらか一方のみが猿0と同じグループに属しているならもう片方のグループはその時刻に落ちたということがわかる.  
よってそのグループに属する猿の答えを記録し, マージする.  
Union-Findのマージはいいとして, 猿の集合のマージはデータ構造をマージする一般的なテクを使う(そうするとそのマージは全体でO(n)になる).  

#### コード

****

{{< includeCode "/POI/X/monkeys.cpp" "cpp" >}}
