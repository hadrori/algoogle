---
layout: post
title: "JOI 春合宿 2010 Sengoku"
date: 2014-09-09 10:15:37 +0900
comments: true
category: JOI
tags: [implementation]
---

[Sengoku](http://joisc2010.contest.atcoder.jp/tasks/joisc2010_sengoku)

#### 問題概要

****

L\*Lのマスがあり, そこにN人の見張りがいる.  
見張りのいる場所(x,y)に対して |x-i|=|y-j| となる(i,j)は見張られているマスになる(傾き1とｰ1の直線に対応する).  
見張られているマスはなんマスあるか

#### 解法

****

線分の集合を考える.  
線分はy=ax+bで考えると, aが1か-1でbがy-xかy+x.  
傾きごとに集合を分けて, さらに交差を考えるので切片の偶奇で分けておく.  
あとは各線分に対して, それに乗る格子点の数を返せばよく,  
交差するのは傾きが違って切片が偶奇が同じもの.  
傾き1で切片bの線分に交差してくるのは傾き−で切片が


{% math %}

|b| \leq c \leq 2(L-1)-|b|

{% em %}


を満たすcもののとき. この範囲にある線分の個数は予めソートしておけば簡単に求められる.  
Lが1e9と大きめで答えがintに収まらない可能性があるので注意すること.

#### コード

****

{% include_code JOI/2010/Sengoku.cpp %}
