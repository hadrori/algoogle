---
layout: post
title: "ONTAK 2007 Hyperclock"
date: 2014-10-29 00:04:04 +0900
comments: true
category: ONTAK
tags: [implementation]
---

[Hyperclock](http://main.edu.pl/en/archive/ontak/2007/hip)

#### 問題概要

****

N個の針が1つだけある時計がある. それぞれ盤上には{% m %}k_i{% em %}個の番号が1から振られている.  
そのN個の時計の針の位置の組によって時刻を決定する時計Hyperclockを考える.  
時計を1つ選んで針を1つ進めるか戻すかの操作ができるとき, ありうる全ての組をちょうど1度だけ示し, 初期状態に戻るような操作方法を示せ.  
ただし全ての時計は始め1を指しているとし, そのような操作が存在しない場合はNIE(ポーランド語でNOの意)と表示せよ.

#### 解法

****

ONTAKとはポーランドのOI系の合宿.  
この問題は必ず条件を満たす操作方法が存在する.  
  
2つの時計u, vについて2次元の表(縦軸をu, 横軸をv)で考える.  
{% m %}k_v{% em %}が偶数の場合  
uを1から{% m %}k_u{% em %}までおろして, vを1進め, 今度はuを{% m %}k_u{% em %}から1まで戻して...とやればよい.  
これで最終的に初期状態に戻る.  
{% m %}k_v{% em %}が奇数の場合  
uを1から{% m %}k_u-1{% em %}まで動かして, vを1進め, 今度はuを{% m %}k_u-1{% em %}から1まで戻して...とやる.  
この時点で針はそれぞれ{% m %}k_u-1{% em %}と{% m %}k_v{% em %}を指している.  
今表の一番下だけ一度も通っていない状態.  
よってこれをさらに1つ下げてvの針を{% m %}k_v{% em %}から1まで戻せば良い.  
あとはuを1進めるだけで初期状態に戻る.  
  
時計が2つでできたら, その操作列を1つの時計としてみる.  
あとはそれを次の時計, 更に次の時計, と組み合わせていけば良い.  

#### コード

****

{% include_code ONTAK/2007/hyperclock.cpp %}
