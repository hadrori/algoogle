---
layout: post
title: "Codeforces 455B A Lot of Games"
date: 2014-08-09 03:26:38 +0900
comments: true
category: Codeforces
tags: [string]
---

[A Lot of Games](http://codeforces.com/problemset/problem/455/B)

#### 問題概要

****

n個の文字列がある.  
2人のプレイヤーが交互に文字列の後ろに1文字追加する.  
ただし追加後の文字列はそれ以外の文字列のprefixになっていなければならない.  
最終的に追加できなくなったほうが負け.  
これを負けた方を先攻にしてk回繰り返す.  
最適な行動をとったとき, 勝つのは始め先攻だったほうか, 後攻だったほうか.

#### 解法

****

まず与えられた文字列でTrie木を作る.  
Trie木の根が文字列が空の時に対応していて, そこから先にノードが存在するように辿れば題意の動きができる.  
あるノードの勝ち負けは, k=1で同じゲームをそのノードを根とする部分木での先攻の勝ち負けとする.
  
現在のノードから行けるノードが無いとき, そのノードは明らかに負け.  
行けるノードのうち1つでも負けなノードがあれば, そこに進めば現在のノードは勝てる.  
また, 行けるノードのうち1つでも勝ちノードがあれば, 現在のノードは負けることも可能.  
  
kが奇数回で先攻が勝つことしか出来ない場合, 先攻の勝ち負け勝ち負け...負け勝ちとなるのは明らか.  
kが偶数階で先攻が負けることしか出来ない場合は負け負け負け...負けとなる.  
先攻が勝つことも負けることもできるとき, 最後から2番目のゲームまで負け続ければ最終回で先攻で勝てる.  

#### コード

****

{% include_code Codeforces/455B.cpp %}
